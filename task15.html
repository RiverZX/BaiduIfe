<!DOCTYPE>
<html>

	<head>
		<meta charset="utf-8">
		<title>IFE JavaScript Task 01</title>
	</head>

	<body>

		<ul id="source">
			<li>北京空气质量：<b>90</b></li>
			<li>上海空气质量：<b>70</b></li>
			<li>天津空气质量：<b>80</b></li>
			<li>广州空气质量：<b>50</b></li>
			<li>深圳空气质量：<b>40</b></li>
			<li>福州空气质量：<b>32</b></li>
			<li>成都空气质量：<b>90</b></li>
		</ul>
		<ul id="resort">
			<!-- 
    <li>第一名：北京空气质量：<b>90</b></li>
    <li>第二名：北京空气质量：<b>90</b></li>
    <li>第三名：北京空气质量：<b>90</b></li>
     -->

		</ul>
		<button id="sort-btn">排序</button>
		<script type="text/javascript">
			function getData() {
				var data = [];
				var source = document.getElementById("source");
				var liArr = source.getElementsByTagName("li");
				var bArr = source.getElementsByTagName("b");
				for (var i = 0, len = liArr.length; i < len; i++) {
					var name = [liArr[i].innerText.substring(0, 2), bArr[i].innerText];
					data.push(name);
				}
				return data;
			}
			function sortAqiData(data) {
				data.sort(function(a, b) {
					return b[1] - a[1];
				});
				return data;
			}
			function textChinese(n) {
				var s="";
				switch(parseInt(n)){
					case 1:s="一";break;
					case 2:s="二";break;
					case 3:s="三";break;
					case 4:s="四";break;
					case 5:s="五";break;
					case 6:s="六";break;
					case 7:s="七";break;
					case 8:s="八";break;
					case 9:s="九";break;
				}
				return s;
			}
			function render(data) {
				var flagment = document.createDocumentFragment();
				var ul = document.getElementById("resort");
				for (var i = 0,j=1 ,len = data.length; i < len; i++,j++) {
					var li = document.createElement("li");
					var b = document.createElement("b");
						li.innerText = "第" + textChinese(j) + "名：" + data[i][0] + "空气质量：";
					    b.innerHTML = data[i][1];
					    li.appendChild(b);
					    flagment.appendChild(li);
				}
				ul.appendChild(flagment);
			}

			function btnHandle() {
				var aqiData = getData();
				aqiData = sortAqiData(aqiData);
				render(aqiData);
			}

			function init() {
				var btn = document.getElementById("sort-btn");
				btn.addEventListener("click", function() {
					btnHandle();
				});
			}
			init();
		</script>
	</body>

</html>